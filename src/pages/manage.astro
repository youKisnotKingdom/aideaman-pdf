---
import Layout from "../layouts/Layout.astro";
import Folder from "../components/Folder.vue";
import UploadPDF from "../components/UploadPDF.vue";
---

<Layout title="manage">
    <main>
		<div class="flex-wrap justify-center">
			<div class="w-4/5 m-10">
				<UploadPDF client:only="vue" />
			</div>
			<div>
				<Folder client:load /> 
			</div>
		</div>
    </main>
</Layout>

<script>
    import { auth } from '../firebase/firestore'
	import { onAuthStateChanged } from 'firebase/auth'
	onAuthStateChanged(auth, (user) => {
		if (!user) window.location.href = "/login"
		else {
			const event = new CustomEvent('userAuth', { detail: true });
		    document.dispatchEvent(event);
		}
	})
</script>